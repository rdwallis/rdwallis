<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=900">
    <title>Monkey Sliding Puzzle</title>
    <meta name="description" content="Monkey Puzzle is a sliding puzzle game.  The objective is to move the blocks to make a picture of a monkey!">
    <meta name="keywords" content="monkey, puzzle, game, sliding, sliding puzzle, sliding game, sliding monkey, monkey puzzle, monkey game, monkey sliding, sliding monkey puzzle, sliding monkey game, sliding monkey sliding, sliding monkey sliding puzzle, sliding monkey sliding game, sliding monkey sliding monkey, sliding monkey sliding puzzle, sliding monkey sliding game, sliding monkey sliding monkey puzzle, sliding monkey sliding monkey game, sliding monkey sliding monkey sliding, sliding monkey sliding monkey sliding puzzle, sliding monkey sliding monkey sliding game, sliding monkey sliding monkey sliding monkey, sliding monkey sliding monkey sliding monkey puzzle, sliding monkey sliding monkey sliding monkey game, sliding monkey sliding monkey sliding monkey sliding, sliding monkey sliding monkey sliding monkey sliding puzzle, sliding monkey sliding monkey sliding monkey sliding game, sliding monkey sliding monkey sliding monkey sliding monkey, sliding monkey sliding monkey sliding monkey sliding monkey puzzle, sliding monkey sliding monkey sliding monkey sliding monkey game, sliding monkey sliding monkey sliding monkey sliding monkey sliding, sliding monkey sliding monkey sliding monkey sliding monkey sliding puzzle, sliding monkey sliding monkey sliding monkey sliding monkey sliding game, sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey, sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey puzzle, sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey game, sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding, sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding puzzle, sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding game, sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey, sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey puzzle, sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey game, sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding, sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding puzzle, sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding game, sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey, sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey puzzle, sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey game, sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding, sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding puzzle, sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding game, sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey, sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding monkey sliding puzzle">
    <meta name="author" content="Richard Wallis">
    <meta property="og:title" content="Monkey Sliding Puzzle">
    <meta property="og:description" content="Monkey Puzzle is a sliding puzzle game.  The objective is to move the blocks to make a picture of a monkey!">
    <meta property="og:image" content="https://rdwallis.github.io/rdwallis/monkeyself.jpg">
    <meta property="og:url" content="https://rdwallis.github.io/rdwallis">
    <style>
        * {
            box-sizing: border-box;
        }
        .grid {
            display: grid;
            grid-template-columns: auto auto auto;
            animation-duration: 0.5s;
        }

        .cell {
            animation-duration: 0.5s;
        }

        .empty {
            opacity: 0.5;
            z-index: -1;
        }

        @keyframes left {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-100%);
            }
        }

        @keyframes right {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(100%);
            }
        }

        @keyframes up {
            0% {
                transform: translateY(0);
            }
            100% {
                transform: translateY(-100%);
            }
        }

        @keyframes down {
            0% {
                transform: translateY(0);
            }
            100% {
                transform: translateY(100%);
            }
        }
    </style>
    <style>
        body {
            margin: 0;
            padding: 0;
            #background: #000;
            overflow: hidden;

        }

        h1, h2 {
            text-align: center;
            margin-top: 30px;
            padding: 0;
        }
        .correct {

        }
        .incorrect {
            background-blend-mode: difference;
            background-color: hsla(0, 100%, 50%, 0.35);
        }

        .pyro > .before, .pyro > .after {
            position: absolute;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            box-shadow: 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff, 0 0 #fff;
            -moz-animation: 1s bang ease-out infinite backwards, 1s gravity ease-in infinite backwards, 5s position linear infinite backwards;
            -webkit-animation: 1s bang ease-out infinite backwards, 1s gravity ease-in infinite backwards, 5s position linear infinite backwards;
            -o-animation: 1s bang ease-out infinite backwards, 1s gravity ease-in infinite backwards, 5s position linear infinite backwards;
            -ms-animation: 1s bang ease-out infinite backwards, 1s gravity ease-in infinite backwards, 5s position linear infinite backwards;
            animation: 1s bang ease-out infinite backwards, 1s gravity ease-in infinite backwards, 5s position linear infinite backwards;
        }

        .pyro > .after {
            -moz-animation-delay: 1.25s, 1.25s, 1.25s;
            -webkit-animation-delay: 1.25s, 1.25s, 1.25s;
            -o-animation-delay: 1.25s, 1.25s, 1.25s;
            -ms-animation-delay: 1.25s, 1.25s, 1.25s;
            animation-delay: 1.25s, 1.25s, 1.25s;
            -moz-animation-duration: 1.25s, 1.25s, 6.25s;
            -webkit-animation-duration: 1.25s, 1.25s, 6.25s;
            -o-animation-duration: 1.25s, 1.25s, 6.25s;
            -ms-animation-duration: 1.25s, 1.25s, 6.25s;
            animation-duration: 1.25s, 1.25s, 6.25s;
        }

        @-webkit-keyframes bang {
            to {
                box-shadow: -137px -131.6666666667px #ae00ff, 114px -96.6666666667px #ff0033, -194px -356.6666666667px #84ff00, -81px -27.6666666667px #00ffdd, 171px -276.6666666667px #f2ff00, -30px -66.6666666667px #15ff00, -53px 44.3333333333px #f2ff00, -26px -76.6666666667px #0dff00, -133px 67.3333333333px #00aeff, -43px 33.3333333333px deepskyblue, 157px -274.6666666667px #0088ff, -72px 11.3333333333px #00ff5e, -166px -333.6666666667px #ff00e6, -65px -372.6666666667px #00ff66, 79px -359.6666666667px #00eaff, 2px -380.6666666667px #ff001a, -223px 53.3333333333px #00ff33, -13px 40.3333333333px #ff003c, 13px -297.6666666667px #00ffcc, 117px -214.6666666667px #15ff00, -43px -81.6666666667px #c4ff00, 119px -404.6666666667px #ff6600, -90px -153.6666666667px #00e6ff, 85px -54.6666666667px #c400ff, 236px -367.6666666667px #ff6200, 32px 17.3333333333px #006aff, -55px -378.6666666667px #d9ff00, -93px -382.6666666667px #fbff00, -70px -285.6666666667px #ff4d00, -131px -335.6666666667px #009dff, -195px -186.6666666667px #5e00ff, 6px 63.3333333333px #ff0004, 164px -271.6666666667px #ff8000, 178px -239.6666666667px #5900ff, -216px -191.6666666667px #ff9100, 135px 60.3333333333px #8000ff, 120px -403.6666666667px #ff6200, 92px -70.6666666667px #00ff95, -241px -108.6666666667px #d9ff00, 166px -82.6666666667px #0077ff, 177px -235.6666666667px #7700ff, -166px 72.3333333333px #0059ff, 185px -354.6666666667px #ff004d, -229px -201.6666666667px #002fff, -152px -21.6666666667px #00ff84, 147px -100.6666666667px #00aaff, -215px -273.6666666667px #ffc800, -83px 54.3333333333px #2600ff, 186px -266.6666666667px #4400ff, -108px -1.6666666667px #f2ff00, -7px -44.6666666667px #00ff2f;
            }
        }
        @-moz-keyframes bang {
            to {
                box-shadow: -137px -131.6666666667px #ae00ff, 114px -96.6666666667px #ff0033, -194px -356.6666666667px #84ff00, -81px -27.6666666667px #00ffdd, 171px -276.6666666667px #f2ff00, -30px -66.6666666667px #15ff00, -53px 44.3333333333px #f2ff00, -26px -76.6666666667px #0dff00, -133px 67.3333333333px #00aeff, -43px 33.3333333333px deepskyblue, 157px -274.6666666667px #0088ff, -72px 11.3333333333px #00ff5e, -166px -333.6666666667px #ff00e6, -65px -372.6666666667px #00ff66, 79px -359.6666666667px #00eaff, 2px -380.6666666667px #ff001a, -223px 53.3333333333px #00ff33, -13px 40.3333333333px #ff003c, 13px -297.6666666667px #00ffcc, 117px -214.6666666667px #15ff00, -43px -81.6666666667px #c4ff00, 119px -404.6666666667px #ff6600, -90px -153.6666666667px #00e6ff, 85px -54.6666666667px #c400ff, 236px -367.6666666667px #ff6200, 32px 17.3333333333px #006aff, -55px -378.6666666667px #d9ff00, -93px -382.6666666667px #fbff00, -70px -285.6666666667px #ff4d00, -131px -335.6666666667px #009dff, -195px -186.6666666667px #5e00ff, 6px 63.3333333333px #ff0004, 164px -271.6666666667px #ff8000, 178px -239.6666666667px #5900ff, -216px -191.6666666667px #ff9100, 135px 60.3333333333px #8000ff, 120px -403.6666666667px #ff6200, 92px -70.6666666667px #00ff95, -241px -108.6666666667px #d9ff00, 166px -82.6666666667px #0077ff, 177px -235.6666666667px #7700ff, -166px 72.3333333333px #0059ff, 185px -354.6666666667px #ff004d, -229px -201.6666666667px #002fff, -152px -21.6666666667px #00ff84, 147px -100.6666666667px #00aaff, -215px -273.6666666667px #ffc800, -83px 54.3333333333px #2600ff, 186px -266.6666666667px #4400ff, -108px -1.6666666667px #f2ff00, -7px -44.6666666667px #00ff2f;
            }
        }
        @-o-keyframes bang {
            to {
                box-shadow: -137px -131.6666666667px #ae00ff, 114px -96.6666666667px #ff0033, -194px -356.6666666667px #84ff00, -81px -27.6666666667px #00ffdd, 171px -276.6666666667px #f2ff00, -30px -66.6666666667px #15ff00, -53px 44.3333333333px #f2ff00, -26px -76.6666666667px #0dff00, -133px 67.3333333333px #00aeff, -43px 33.3333333333px deepskyblue, 157px -274.6666666667px #0088ff, -72px 11.3333333333px #00ff5e, -166px -333.6666666667px #ff00e6, -65px -372.6666666667px #00ff66, 79px -359.6666666667px #00eaff, 2px -380.6666666667px #ff001a, -223px 53.3333333333px #00ff33, -13px 40.3333333333px #ff003c, 13px -297.6666666667px #00ffcc, 117px -214.6666666667px #15ff00, -43px -81.6666666667px #c4ff00, 119px -404.6666666667px #ff6600, -90px -153.6666666667px #00e6ff, 85px -54.6666666667px #c400ff, 236px -367.6666666667px #ff6200, 32px 17.3333333333px #006aff, -55px -378.6666666667px #d9ff00, -93px -382.6666666667px #fbff00, -70px -285.6666666667px #ff4d00, -131px -335.6666666667px #009dff, -195px -186.6666666667px #5e00ff, 6px 63.3333333333px #ff0004, 164px -271.6666666667px #ff8000, 178px -239.6666666667px #5900ff, -216px -191.6666666667px #ff9100, 135px 60.3333333333px #8000ff, 120px -403.6666666667px #ff6200, 92px -70.6666666667px #00ff95, -241px -108.6666666667px #d9ff00, 166px -82.6666666667px #0077ff, 177px -235.6666666667px #7700ff, -166px 72.3333333333px #0059ff, 185px -354.6666666667px #ff004d, -229px -201.6666666667px #002fff, -152px -21.6666666667px #00ff84, 147px -100.6666666667px #00aaff, -215px -273.6666666667px #ffc800, -83px 54.3333333333px #2600ff, 186px -266.6666666667px #4400ff, -108px -1.6666666667px #f2ff00, -7px -44.6666666667px #00ff2f;
            }
        }
        @-ms-keyframes bang {
            to {
                box-shadow: -137px -131.6666666667px #ae00ff, 114px -96.6666666667px #ff0033, -194px -356.6666666667px #84ff00, -81px -27.6666666667px #00ffdd, 171px -276.6666666667px #f2ff00, -30px -66.6666666667px #15ff00, -53px 44.3333333333px #f2ff00, -26px -76.6666666667px #0dff00, -133px 67.3333333333px #00aeff, -43px 33.3333333333px deepskyblue, 157px -274.6666666667px #0088ff, -72px 11.3333333333px #00ff5e, -166px -333.6666666667px #ff00e6, -65px -372.6666666667px #00ff66, 79px -359.6666666667px #00eaff, 2px -380.6666666667px #ff001a, -223px 53.3333333333px #00ff33, -13px 40.3333333333px #ff003c, 13px -297.6666666667px #00ffcc, 117px -214.6666666667px #15ff00, -43px -81.6666666667px #c4ff00, 119px -404.6666666667px #ff6600, -90px -153.6666666667px #00e6ff, 85px -54.6666666667px #c400ff, 236px -367.6666666667px #ff6200, 32px 17.3333333333px #006aff, -55px -378.6666666667px #d9ff00, -93px -382.6666666667px #fbff00, -70px -285.6666666667px #ff4d00, -131px -335.6666666667px #009dff, -195px -186.6666666667px #5e00ff, 6px 63.3333333333px #ff0004, 164px -271.6666666667px #ff8000, 178px -239.6666666667px #5900ff, -216px -191.6666666667px #ff9100, 135px 60.3333333333px #8000ff, 120px -403.6666666667px #ff6200, 92px -70.6666666667px #00ff95, -241px -108.6666666667px #d9ff00, 166px -82.6666666667px #0077ff, 177px -235.6666666667px #7700ff, -166px 72.3333333333px #0059ff, 185px -354.6666666667px #ff004d, -229px -201.6666666667px #002fff, -152px -21.6666666667px #00ff84, 147px -100.6666666667px #00aaff, -215px -273.6666666667px #ffc800, -83px 54.3333333333px #2600ff, 186px -266.6666666667px #4400ff, -108px -1.6666666667px #f2ff00, -7px -44.6666666667px #00ff2f;
            }
        }
        @keyframes bang {
            to {
                box-shadow: -137px -131.6666666667px #ae00ff, 114px -96.6666666667px #ff0033, -194px -356.6666666667px #84ff00, -81px -27.6666666667px #00ffdd, 171px -276.6666666667px #f2ff00, -30px -66.6666666667px #15ff00, -53px 44.3333333333px #f2ff00, -26px -76.6666666667px #0dff00, -133px 67.3333333333px #00aeff, -43px 33.3333333333px deepskyblue, 157px -274.6666666667px #0088ff, -72px 11.3333333333px #00ff5e, -166px -333.6666666667px #ff00e6, -65px -372.6666666667px #00ff66, 79px -359.6666666667px #00eaff, 2px -380.6666666667px #ff001a, -223px 53.3333333333px #00ff33, -13px 40.3333333333px #ff003c, 13px -297.6666666667px #00ffcc, 117px -214.6666666667px #15ff00, -43px -81.6666666667px #c4ff00, 119px -404.6666666667px #ff6600, -90px -153.6666666667px #00e6ff, 85px -54.6666666667px #c400ff, 236px -367.6666666667px #ff6200, 32px 17.3333333333px #006aff, -55px -378.6666666667px #d9ff00, -93px -382.6666666667px #fbff00, -70px -285.6666666667px #ff4d00, -131px -335.6666666667px #009dff, -195px -186.6666666667px #5e00ff, 6px 63.3333333333px #ff0004, 164px -271.6666666667px #ff8000, 178px -239.6666666667px #5900ff, -216px -191.6666666667px #ff9100, 135px 60.3333333333px #8000ff, 120px -403.6666666667px #ff6200, 92px -70.6666666667px #00ff95, -241px -108.6666666667px #d9ff00, 166px -82.6666666667px #0077ff, 177px -235.6666666667px #7700ff, -166px 72.3333333333px #0059ff, 185px -354.6666666667px #ff004d, -229px -201.6666666667px #002fff, -152px -21.6666666667px #00ff84, 147px -100.6666666667px #00aaff, -215px -273.6666666667px #ffc800, -83px 54.3333333333px #2600ff, 186px -266.6666666667px #4400ff, -108px -1.6666666667px #f2ff00, -7px -44.6666666667px #00ff2f;
            }
        }
        @-webkit-keyframes gravity {
            to {
                transform: translateY(200px);
                -moz-transform: translateY(200px);
                -webkit-transform: translateY(200px);
                -o-transform: translateY(200px);
                -ms-transform: translateY(200px);
                opacity: 0;
            }
        }
        @-moz-keyframes gravity {
            to {
                transform: translateY(200px);
                -moz-transform: translateY(200px);
                -webkit-transform: translateY(200px);
                -o-transform: translateY(200px);
                -ms-transform: translateY(200px);
                opacity: 0;
            }
        }
        @-o-keyframes gravity {
            to {
                transform: translateY(200px);
                -moz-transform: translateY(200px);
                -webkit-transform: translateY(200px);
                -o-transform: translateY(200px);
                -ms-transform: translateY(200px);
                opacity: 0;
            }
        }
        @-ms-keyframes gravity {
            to {
                transform: translateY(200px);
                -moz-transform: translateY(200px);
                -webkit-transform: translateY(200px);
                -o-transform: translateY(200px);
                -ms-transform: translateY(200px);
                opacity: 0;
            }
        }
        @keyframes gravity {
            to {
                transform: translateY(200px);
                -moz-transform: translateY(200px);
                -webkit-transform: translateY(200px);
                -o-transform: translateY(200px);
                -ms-transform: translateY(200px);
                opacity: 0;
            }
        }
        @-webkit-keyframes position {
            0%, 19.9% {
                margin-top: 10%;
                margin-left: 40%;
            }
            20%, 39.9% {
                margin-top: 40%;
                margin-left: 30%;
            }
            40%, 59.9% {
                margin-top: 20%;
                margin-left: 70%;
            }
            60%, 79.9% {
                margin-top: 30%;
                margin-left: 20%;
            }
            80%, 99.9% {
                margin-top: 30%;
                margin-left: 80%;
            }
        }
        @-moz-keyframes position {
            0%, 19.9% {
                margin-top: 10%;
                margin-left: 40%;
            }
            20%, 39.9% {
                margin-top: 40%;
                margin-left: 30%;
            }
            40%, 59.9% {
                margin-top: 20%;
                margin-left: 70%;
            }
            60%, 79.9% {
                margin-top: 30%;
                margin-left: 20%;
            }
            80%, 99.9% {
                margin-top: 30%;
                margin-left: 80%;
            }
        }
        @-o-keyframes position {
            0%, 19.9% {
                margin-top: 10%;
                margin-left: 40%;
            }
            20%, 39.9% {
                margin-top: 40%;
                margin-left: 30%;
            }
            40%, 59.9% {
                margin-top: 20%;
                margin-left: 70%;
            }
            60%, 79.9% {
                margin-top: 30%;
                margin-left: 20%;
            }
            80%, 99.9% {
                margin-top: 30%;
                margin-left: 80%;
            }
        }
        @-ms-keyframes position {
            0%, 19.9% {
                margin-top: 10%;
                margin-left: 40%;
            }
            20%, 39.9% {
                margin-top: 40%;
                margin-left: 30%;
            }
            40%, 59.9% {
                margin-top: 20%;
                margin-left: 70%;
            }
            60%, 79.9% {
                margin-top: 30%;
                margin-left: 20%;
            }
            80%, 99.9% {
                margin-top: 30%;
                margin-left: 80%;
            }
        }
        @keyframes position {
            0%, 19.9% {
                margin-top: 10%;
                margin-left: 40%;
            }
            20%, 39.9% {
                margin-top: 40%;
                margin-left: 30%;
            }
            40%, 59.9% {
                margin-top: 20%;
                margin-left: 70%;
            }
            60%, 79.9% {
                margin-top: 30%;
                margin-left: 20%;
            }
            80%, 99.9% {
                margin-top: 30%;
                margin-left: 80%;
            }
        }
    </style>
</head>
<body>
<div class="pyro" style="display: none">
    <div class="before"></div>
    <div class="after"></div>
</div>
<div id="recSlider">
</div>
<h1>Complete the puzzle</h1>
<h2>Tap the blocks to slide</h2>
    <script type="text/javascript">
        (() => {
            const positiveSounds = [new Audio('genius.m4a'), new Audio('incredible.m4a'), new Audio('wow.m4a')]
            const negativeSounds = [new Audio('whapwaa.m4a'), new Audio('sure.m4a')];
            const maybeSounds = [new Audio('twosteps.m4a')];
            const won = new Audio('won.m4a');

            const picture = 'monkeyself.jpg';
            const cellSize = 100;
            const recSlider = document.getElementById('recSlider');

            function debounce(func, wait, immediate) {
                var timeout;
                return function() {
                    var context = this, args = arguments;
                    var later = function() {
                        timeout = null;
                        if (!immediate) func.apply(context, args);
                    };
                    var callNow = immediate && !timeout;
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                    if (callNow) func.apply(context, args);
                };
            };

            function actualAfterMove() {
                console.log("Board is correct: ", root.isCorrect());
                if (root.isCorrect()) {
                    document.getElementsByTagName('body')[0].style.backgroundColor = '#000';
                    won.play();
                    let emptyElems = document.getElementsByClassName('empty');
                    try {
                        for (let i = 0; i < emptyElems.length; i++) {
                            while (emptyElems[i].classList.contains('empty')) {
                                emptyElems[i].classList.remove('empty');
                            }
                        }
                    } catch (e) {

                    }
                    root.removePadding();
                    document.getElementsByClassName('pyro')[0].style.display = 'block';

                }
            }

            function afterMove() {
                debounce(actualAfterMove, 500)();
            }

            function processBetterWorse() {
                const rand = Math.floor(Math.random() * 5);
                if (betterer && worser) {
                    maybeSounds[Math.floor(Math.random() * (maybeSounds.length - 1))].play();
                    console.log("1 step forward, 2 steps back");
                } else if (betterer) {
                    positiveSounds[Math.floor(Math.random() * (positiveSounds.length - 1))].play();
                    console.log("Betterer");
                } else if (worser) {
                    //negativeSounds[Math.floor(Math.random() * (negativeSounds.length - 1))].play();
                    console.log("Worser");
                }
                betterer = false;
                worser = false;
            }

            let worser = false;
            function worse() {
                worser = true;
                debounce(processBetterWorse, 500)();
            }

            let betterer = false;
            function better() {
                betterer = true;
                debounce(processBetterWorse, 500)();
            }

            class Board {
                constructor(rowLength, columnLength, recursion, correctRow, correctColumn, parent, ignore) {
                    this.element = document.createElement('div');
                    this.element.classList.add('grid');
                    if (ignore) {
                        this.element.classList.add('empty');
                    }
                    this.correctRow = correctRow;
                    this.correctColumn = correctColumn;

                    this.parent = parent;


                    this.rowLength = rowLength;
                    this.columnLength = columnLength;
                    this.recursion = recursion;


                    this.ary = [];
                    let colEmpty =  Math.floor(Math.random() * columnLength);
                    let rowEmpty =  Math.floor(Math.random() * rowLength);
                        while (colEmpty === this.correctColumn && rowEmpty === this.correctRow) {
                            colEmpty =  Math.floor(Math.random() * columnLength);
                            rowEmpty =  Math.floor(Math.random() * rowLength);
                        }

                    let count = 0;
                    for (let row = 0; row < rowLength; row++) {
                        this.ary[row] = [];
                        for (let column = 0; column < columnLength; column++) {
                            let empty = ignore || colEmpty === column && rowEmpty === row;

                                let cell;
                                if (recursion > 1) {

                                    this.ary[row][column] = new Board(rowLength, columnLength, recursion - 1, row, column, this, empty);
                                    cell = this.ary[row][column].element;
                                    cell.style.width = this.ary[row][column].getPixelWidth() + 'px';
                                    cell.style.height = this.ary[row][column].getPixelHeight() + 'px';
                                    if (empty) {
                                        this.ary[row][column] = null;
                                    } else {
                                        cell.style.border = '1px solid black';
                                    }

                                } else {

                                    cell = document.createElement('div');
                                    if (!empty) {
                                        this.ary[row][column] = cell;
                                    }
                                    cell.style.width = cellSize + 'px';
                                    cell.style.height = cellSize + 'px';

                                    cell.style.backgroundImage = 'url('+ picture + ')';
                                    cell.style.backgroundPositionX = -(cellSize * column + this.getOffsetX()) + 'px';
                                    cell.style.backgroundPositionY = -(cellSize * row + this.getOffsetY()) + 'px';
                                    cell.classList.add('cell');
                                    //cell.textContent = ++count;
                                    cell.style.color = 'white';
                                    if (!empty) {


                                        cell.addEventListener('click', () => {

                                            this.move(cell);
                                        });
                                        cell.addEventListener('touchstart', () => {

                                            this.move(cell);
                                        });
                                    } else {
                                        cell.classList.add('empty');
                                    }


                                }
                                cell.style.gridColumnStart = (column + 1) + '';
                                cell.style.gridRowStart = (row + 1) + '';
                                cell.dataset.correctColumn = column;
                                cell.dataset.correctRow = row;
                                cell.addEventListener('animationend', () => {
                                    switch (cell.style.animationName) {
                                        case 'left' : cell.style.gridColumnStart = (parseInt(cell.style.gridColumnStart) - 1) + '';
                                            break;
                                        case 'right' : cell.style.gridColumnStart = (parseInt(cell.style.gridColumnStart) + 1) + '';
                                            break;
                                        case 'up' : cell.style.gridRowStart = (parseInt(cell.style.gridRowStart) - 1) + '';
                                            break;
                                        case 'down' : cell.style.gridRowStart = (parseInt(cell.style.gridRowStart) + 1) + '';
                                            break;
                                    }
                                    cell.style.animation = '';
                                });

                                this.element.appendChild(cell);
                        }
                    }
                    this.element.style.width = (this.getPixelWidth() + 5) + 'px';
                    this.element.style.height = (this.getPixelHeight() + 5) + 'px';
                }
                move(cell) {
                    const row = cell.style.gridRowStart - 1;
                    const column = cell.style.gridColumnStart - 1;
                    if (column < this.columnLength - 1) {
                        if (!this.ary[row][column + 1]) {
                            this.right();
                        }
                    }
                    if (column > 0) {
                        if (!this.ary[row][column - 1]) {
                            this.left();
                        }
                    }
                    if (row < this.rowLength - 1) {
                        if (!this.ary[row + 1][column]) {
                            this.down();
                        }
                    }
                    if (row > 0) {
                        if (!this.ary[row - 1][column]) {
                            this.up();
                        }
                    }

                }
                randomize() {
                    for (let i = 0; i < 100; i++) {
                        const random = Math.floor(Math.random() * 4);

                        switch (random) {
                            case 0 :
                                this.right(null, false);
                                break;
                            case 1 :
                                this.left(null, false);
                                break;
                            case 2 :
                                this.up(null, false);
                                break;
                            case 3 :
                                this.down(null, false);
                                break;
                        }
                    }
                    for (let row = 0; row < this.rowLength; row++) {
                        for (let column = 0; column < this.columnLength; column++) {
                            if (this.ary[row] && this.ary[row][column]) {
                                if (this.ary[row][column] instanceof Board) {
                                    this.ary[row][column].randomize();
                                }
                            }
                        }
                    }
                }

                isCorrect() {
                    let correct = true;
                    for (let row = 0; row < this.rowLength; row++) {
                        for (let column = 0; column < this.columnLength; column++) {
                            if (this.ary[row] && this.ary[row][column]) {
                                let elem;
                                let isBoard = this.ary[row][column] instanceof Board;
                                if (isBoard) {
                                    elem = this.ary[row][column].element;
                                    correct = this.ary[row][column].isCorrect() && correct;
                                } else {
                                    elem = this.ary[row][column];
                                }
                                let dataset = elem.dataset;
                                // noinspection EqualityComparisonWithCoercionJS
                                let cellCorrect = dataset.correctColumn == column && dataset.correctRow == row
                                if (cellCorrect) {
                                    if (!isBoard) {

                                        elem.classList.add('correct');
                                        elem.classList.remove('incorrect');
                                    }
                                } else {
                                    if (!isBoard) {
                                        elem.classList.add('incorrect');
                                        elem.classList.remove('correct');
                                    }
                                    correct = false;
                                }
                            }
                        }
                    }
                    return correct;
                }

                getOffsetX() {
                    if (this.parent) {
                        return this.parent.getOffsetX() + this.correctColumn * this.getPixelWidth();
                    }
                    return 0;
                }

                getOffsetY() {
                    if (this.parent) {
                        return this.parent.getOffsetY() + this.correctRow * this.getPixelHeight();
                    }
                    return 0;
                }

                getElement() {
                    return this.element;
                }

                getPixelWidth() {
                    if (this.recursion > 1) {
                        return this.columnLength * this.getAnyChild().getPixelWidth();
                    } else {
                        return this.columnLength * cellSize;
                    }
                }

                getPixelHeight() {
                    if (this.recursion > 1) {
                        return this.rowLength * this.getAnyChild().getPixelHeight();
                    } else {
                        return this.rowLength * cellSize;
                    }
                }

                getAnyChild() {
                    for (let row = 0; row < this.rowLength; row++) {
                        for (let column = 0; column < this.columnLength; column++) {
                            if (this.ary[row] && this.ary[row][column]) {
                                return this.ary[row][column];
                            }
                        }
                    }
                }

                left(child, animate = true) {
                    let moved = false;
                    for (let row = 0; row < this.rowLength; row++) {
                        for (let column = this.columnLength - 1; column >= 0; column--) {
                            if (this.ary[row][column]) {
                                if (!moved && column > 0) {
                                    if (!this.ary[row][column - 1]) {
                                        if (child) {
                                            if (child !== this.ary[row][column]) {
                                                return
                                            }
                                        }
                                        const cell = this.ary[row][column];
                                        this.ary[row][column - 1] = cell;
                                        this.ary[row][column] = null;
                                        if (animate && this.parent) {
                                            if (column === 1) {
                                                this.parent.left(this);
                                            }
                                        }
                                        const elem = cell instanceof Board ? cell.element : cell;
                                        let dataset = elem.dataset;
                                        // noinspection EqualityComparisonWithCoercionJS
                                        if (animate && dataset.correctRow == row) {
                                            // noinspection EqualityComparisonWithCoercionJS
                                            if (dataset.correctColumn == column) {
                                                elem.classList.remove('correct');
                                                elem.classList.add('incorrect');
                                                worse();
                                            }
                                            // noinspection EqualityComparisonWithCoercionJS
                                            if (dataset.correctColumn == column - 1) {
                                                elem.classList.add('correct');
                                                elem.classList.remove('incorrect');
                                                better();
                                            }
                                        }
                                        if (animate) {

                                            elem.style.animationName = 'left';
                                        } else {
                                            elem.style.gridColumnStart = (parseInt(elem.style.gridColumnStart) - 1) + '';
                                        }
                                        moved = true;
                                        afterMove();
                                    }
                                }
                            }
                        }
                    }
                }

                right(child, animate = true) {
                    let moved = false;
                    for (let row = 0; row < this.rowLength; row++) {
                        for (let column = 0; column < this.columnLength; column++) {
                            if (this.ary[row][column]) {
                                if (!moved && column < this.columnLength - 1) {
                                    if (!this.ary[row][column + 1]) {
                                        if (child) {
                                            if (child !== this.ary[row][column]) {
                                                return
                                            }
                                        }
                                        const cell = this.ary[row][column];
                                        this.ary[row][column + 1] = cell
                                        this.ary[row][column] = null;
                                        if (animate && this.parent) {
                                            if (column === this.columnLength - 2) {
                                                this.parent.right(this);
                                            }
                                        }
                                        const elem = cell instanceof Board ? cell.element : cell;
                                        let dataset = elem.dataset;
                                        // noinspection EqualityComparisonWithCoercionJS
                                        if (animate && dataset.correctRow == row) {
                                            // noinspection EqualityComparisonWithCoercionJS
                                            if (dataset.correctColumn == column) {
                                                elem.classList.remove('correct');
                                                elem.classList.add('incorrect');
                                                worse();
                                            }
                                            // noinspection EqualityComparisonWithCoercionJS
                                            if (dataset.correctColumn == column + 1) {
                                                elem.classList.add('correct');
                                                elem.classList.remove('incorrect');
                                                better();
                                            }
                                        }
                                        const style = elem.style;
                                        if (animate) {
                                            style.animationName = 'right';
                                        } else {
                                            style.gridColumnStart = (parseInt(style.gridColumnStart) + 1) + '';
                                        }
                                        moved = true;
                                        afterMove();
                                    }
                                }
                            }
                        }
                    }
                }

                up(child, animate = true) {
                    let moved = false;
                    for (let row = this.rowLength - 1; row >= 0; row--) {
                        for (let column = 0; column < this.columnLength; column++) {
                            if (this.ary[row][column]) {

                                if (!moved && row > 0) {
                                    if (!this.ary[row - 1][column]) {
                                        if (child) {
                                            if (child !== this.ary[row][column]) {
                                                return
                                            }
                                        }
                                        const cell = this.ary[row][column];
                                        this.ary[row - 1][column] = cell;
                                        this.ary[row][column] = null;
                                        if (animate && this.parent) {
                                            if (row === 1) {
                                                this.parent.up(this);
                                            }
                                        }
                                        const elem = cell instanceof Board ? cell.element : cell;
                                        let dataset = elem.dataset;
                                        // noinspection EqualityComparisonWithCoercionJS
                                        if (animate && dataset.correctColumn == column) {
                                            // noinspection EqualityComparisonWithCoercionJS
                                            if (dataset.correctRow == row) {
                                                elem.classList.remove('correct');
                                                elem.classList.add('incorrect');
                                                worse();
                                            }
                                            // noinspection EqualityComparisonWithCoercionJS
                                            if (dataset.correctRow == row - 1) {
                                                elem.classList.add('correct');
                                                elem.classList.remove('incorrect');
                                                better();
                                            }
                                        }
                                        const style = elem.style;
                                        if (animate) {
                                            style.animationName = 'up';
                                        } else {
                                            style.gridRowStart = (parseInt(style.gridRowStart) - 1) + '';
                                        }
                                        moved = true;
                                        afterMove();
                                    }
                                }
                            }
                        }
                    }
                }

                down(child, animate = true) {
                    let moved = false;
                    for (let row = 0; row < this.rowLength; row++) {
                        for (let column = 0; column < this.columnLength; column++) {
                            if (this.ary[row][column]) {
                                if (!moved && row < this.rowLength - 1) {
                                    if (!this.ary[row + 1][column]) {
                                        if (child) {
                                            if (child !== this.ary[row][column]) {
                                                return
                                            }
                                        }
                                        const cell = this.ary[row][column];
                                        this.ary[row + 1][column] = cell;
                                        this.ary[row][column] = null;
                                        if (animate && this.parent) {
                                            if (row === this.rowLength - 2) {
                                                this.parent.down(this);
                                            }
                                        }
                                        const elem = cell instanceof Board ? cell.element : cell;
                                        let dataset = elem.dataset;
                                        // noinspection EqualityComparisonWithCoercionJS
                                        if (animate && dataset.correctColumn == column) {
                                            // noinspection EqualityComparisonWithCoercionJS
                                            if (dataset.correctRow == row) {
                                                elem.classList.remove('correct');
                                                elem.classList.add('incorrect');
                                                worse();
                                            }
                                            // noinspection EqualityComparisonWithCoercionJS
                                            if (dataset.correctRow == row + 1) {
                                                elem.classList.add('correct');
                                                elem.classList.remove('incorrect');
                                                better();
                                            }
                                        }
                                        const style = elem.style;
                                        if (animate) {
                                            style.animationName = 'down';
                                        } else {
                                            style.gridRowStart = (parseInt(style.gridRowStart) + 1) + '';
                                        }
                                        moved = true;
                                        afterMove();
                                    }
                                }
                            }
                        }
                    }
                }

                removePadding() {
                    this.element.style.width = (this.getPixelWidth()) + 'px';
                    this.element.style.height = (this.getPixelHeight()) + 'px';
                    this.element.style.border = 'none';
                    for (let row = 0; row < this.rowLength; row++) {
                        for (let column = 0; column < this.columnLength; column++) {
                            if (this.ary[row] && this.ary[row][column]) {
                                if (this.ary[row][column] instanceof Board) {
                                    const board = this.ary[row][column];

                                    board.removePadding();
                                }
                            }
                        }
                    }
                }
            }

            const root = new Board(3,3, 2, 0, 0);

            function draw() {
                recSlider.appendChild(root.getElement());
                root.randomize();
            }

            draw();
        })();
    </script>
</body>
</html>